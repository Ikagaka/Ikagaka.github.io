<script src="./vender/encoding.js"></script>
<script src="./vender/js-yaml.min.js"></script>
<script src="./vender/jszip.min.js"></script>
<script src="./vender/surfaces_txt2yaml.js"></script>
<script src="./vender/WMDescript.js"></script>
<script src="./vender/XHRProxy.min.js"></script>
<script src="./vender/zepto.min.js"></script>
<script src="./ikagaka.js"></script>
<input id="surfaceId" type="number" value="2010" />
<script>
$(function(){

  new Ikagaka("./vender/ku-ver06.1.nar", function(err, ikgk){
    if(!!err) return console.error(err.stack);

    console.log(ikgk);

    var srf = ikgk.getSurface(0, 2010);
    srf.setEventListener(function(ev){
      console.log(ev);
    });
    document.body.appendChild(srf.canvas);

    $("#surfaceId").change(function(ev){
      if(!!srf){
        document.body.removeChild(srf.canvas);
        srf.destructor();
      }
      srf = ikgk.getSurface(0, Number($(ev.target).val()));
      if(!srf) return;
      srf.setEventListener(function(ev){
        console.log(ev);
      });

      document.body.appendChild(srf.canvas);
    });


  });

});
</script>
